<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eminem: Parse Matrix Market files in C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">eminem
   </div>
   <div id="projectbrief">Parse Matrix Market files in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Parse Matrix Market files in C++ </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__github_workspace_README"></a> <img src="https://github.com/tatami-inc/eminem/actions/workflows/run-tests.yaml/badge.svg" alt="Unit tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/tatami-inc/eminem/actions/workflows/doxygenate.yaml/badge.svg" alt="Documentation" style="pointer-events: none;" class="inline"/> <a href="https://codecov.io/gh/tatami-inc/eminem"><img src="https://codecov.io/gh/tatami-inc/eminem/branch/master/graph/badge.svg?token=7I3UBJLHSO" alt="codecov" style="pointer-events: none;" class="inline"/></a></p>
<h1>Overview</h1>
<p >The <b>eminem</b> library implements parsers for Matrix Market (<code>*.mm</code>/<code>*.mtx</code>) files. We support matrix or vector objects, coordinate or array formats, and all the different fields (integer, real, complex and pattern). We support reading from text files, Gzip-compressed files, as well as in-memory buffers. Users can supply their own functions to process each line on the fly, based on the information in the banner and size lines.</p>
<h1>Quick start</h1>
<p >We first create the desired <code>Parser</code> subclass:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="eminem_8hpp.html">eminem/eminem.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="structeminem_1_1TextFileParser.html">eminem::TextFileParser</a> parser(<span class="stringliteral">&quot;some_path.mm&quot;</span>);</div>
<div class="ttc" id="aeminem_8hpp_html"><div class="ttname"><a href="eminem_8hpp.html">eminem.hpp</a></div><div class="ttdoc">Umbrella header for the eminem library.</div></div>
<div class="ttc" id="astructeminem_1_1TextFileParser_html"><div class="ttname"><a href="structeminem_1_1TextFileParser.html">eminem::TextFileParser</a></div><div class="ttdoc">Parse a Matrix Market text file.</div><div class="ttdef"><b>Definition:</b> from_text.hpp:22</div></div>
</div><!-- fragment --><p >We scan through the preamble, which contains the banner and the size lines. The type of the data field in the banner will determine which scanning function to use. The size lines can also help with pre-allocation of memory to store the scanning output, if necessary.</p>
<div class="fragment"><div class="line">parser.scan_preamble();</div>
<div class="line"><span class="keyword">auto</span> deets = parser.get_banner();</div>
<div class="line"><span class="keyword">auto</span> NR = parser.get_nrows();</div>
<div class="line"><span class="keyword">auto</span> NC = parser.get_ncols();</div>
<div class="line"><span class="keyword">auto</span> NL = parser.get_nlines();</div>
</div><!-- fragment --><p >Finally, we scan through the actual data lines, providing a lambda or functor to process each row/column/value triplet as it is parsed. Note that the row/column indices are 1-based when they are passed to the lambda.</p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (deets.field == eminem::Field::INTEGER) {</div>
<div class="line">    parser.scan_integer([&amp;](<span class="keywordtype">size_t</span> r, <span class="keywordtype">size_t</span> c, <span class="keywordtype">int</span> v) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line">        <span class="comment">// Do something per line.</span></div>
<div class="line">    });</div>
<div class="line">} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (deets.field == eminem::Field::REAL) {</div>
<div class="line">    parser.scan_real([&amp;](<span class="keywordtype">size_t</span> r, <span class="keywordtype">size_t</span> c, <span class="keywordtype">double</span> v) -&gt; <span class="keywordtype">void</span> {</div>
<div class="line">        <span class="comment">// Do something else.</span></div>
<div class="line">    });</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// and so on...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p >Check out the <a href="https://tatami-inc.github.io/eminem/">reference documentation</a> for more details.</p>
<h1>Building projects</h1>
<p >If you're using CMake, you just need to add something like this to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  tatami</div>
<div class="line">  GIT_REPOSITORY https://github.com/tatami-inc/eminem</div>
<div class="line">  GIT_TAG master # or any version of interest</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(tatami)</div>
</div><!-- fragment --><p >Then you can link to <b>tatami</b> to make the headers available during compilation:</p>
<div class="fragment"><div class="line"># For executables:</div>
<div class="line">target_link_libraries(myexe eminem)</div>
<div class="line"> </div>
<div class="line"># For libaries</div>
<div class="line">target_link_libraries(mylib INTERFACE eminem)</div>
</div><!-- fragment --><p >To support Gzip-compressed files, we also need to link to Zlib. Otherwise, if the Zlib headers are not available, Gzip support is automatically dropped.</p>
<div class="fragment"><div class="line">find_package(ZLIB)</div>
<div class="line">target_link_libraries(myexe ZLIB::ZLIB)</div>
</div><!-- fragment --><p >If you're not using CMake, the simple approach is to just copy the files - either directly or with Git submodules - and include their path during compilation with, e.g., GCC's <code>-I</code>. You'll also need to add the <a href="https://github.com/LTLA/byteme"><b>byteme</b></a> header-only library to the compiler's search path. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
